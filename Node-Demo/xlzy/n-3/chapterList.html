<!doctype html>
<html>
<head>
    <link href="css/base.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="js/baiduTemplate.js"></script>
    <title>列表页</title>
</head>
<body>

<article class="blogs">
    <h2 class="title_tj">
    <p>文章<span>推荐</span></p>
  </h2>
	<div class="newblog left">
        <!--左left开始-->
        <div class="oneblog">
            <h2><a title="路·过-喜欢在路上" href="/chapter?a=0">路·过-喜欢在路上</a></h2>
            <figure><img src='images/1442201163344838-lp.jpg' width='120' height='120' alt='路·过-喜欢在路上'></figure>
            <ul class="nlist">
                <p>注定，有些路，只能一个人走；有些事，只能一个人扛。因为我喜欢在路上！走在林间小道上，一个人，晃晃悠悠，无所适从，看着那些在风中微微呻吟着的落叶，远远望去，像一群疲...</p>
                <a title="路·过-喜欢在路上" href="/chapter?a=0" target="_blank" class="readmore">阅读全文>></a>
            </ul>
            <p class="dateview">
                <span>发布时间：2019-08-19</span>
                <span>作者：admin</span>
                <span>分类：[<a href="/">悠客</a>]</span>
                <span class="nl">浏览（101)</span>
                <span class="n2">评论（<a href="/">0</a>）</span>
                <div class="line"></div>
            </p>
        </div>
        <div class="oneblog">
            <h2><a title="路·过-喜欢在路上" href="/chapter?a=1">路·过-喜欢在路上</a></h2>
            <figure><img src='images/1442642178239101-lp.jpg' border='0' width='120' height='120' alt='路·过-喜欢在路上'></figure>
            <ul class="nlist">
                <p>注定，有些路，只能一个人走；有些事，只能一个人扛。因为我喜欢在路上！走在林间小道上，一个人，晃晃悠悠，无所适从，看着那些在风中微微呻吟着的落叶，远远望去，像一群疲...</p>
                <a title="路·过-喜欢在路上" href="/chapter?a=1" target="_blank" class="readmore">阅读全文>></a>
            </ul>
            <p class="dateview">
                <span>发布时间：2019-08-19</span>
                <span>作者：admin</span>
                <span>分类：[<a href="/">悠客</a>]</span>
                <span class="nl">浏览（101)</span>
                <span class="n2">评论（<a href="/">0</a>）</span>
                <div class="line"></div>
            </p>
        </div>
        <div class="oneblog">
            <h2><a title="路·过-喜欢在路上" href="/chapter?a=2">路·过-喜欢在路上</a></h2>
            <figure><img src='images/1442539025939884-lp.jpg' border='0' width='120' height='120' alt='路·过-喜欢在路上'></figure>
            <ul class="nlist">
                <p>注定，有些路，只能一个人走；有些事，只能一个人扛。因为我喜欢在路上！走在林间小道上，一个人，晃晃悠悠，无所适从，看着那些在风中微微呻吟着的落叶，远远望去，像一群疲...</p>
                <a title="路·过-喜欢在路上" href="/chapter?a=2" target="_blank" class="readmore">阅读全文>></a>
            </ul>
            <p class="dateview">
                <span>发布时间：2019-08-19</span>
                <span>作者：admin</span>
                <span>分类：[<a href="/">悠客</a>]</span>
                <span class="nl">浏览（101)</span>
                <span class="n2">评论（<a href="/">0</a>）</span>
                <div class="line"></div>
            </p>
        </div>
        <div class="oneblog">
            <h2><a title="路·过-喜欢在路上" href="/chapter?a=3">路·过-喜欢在路上</a></h2>
            <figure><img src='images/1442457564979540.jpeg' border='0' width='120' height='120' alt='路·过-喜欢在路上'></figure>
            <ul class="nlist">
                <p>注定，有些路，只能一个人走；有些事，只能一个人扛。因为我喜欢在路上！走在林间小道上，一个人，晃晃悠悠，无所适从，看着那些在风中微微呻吟着的落叶，远远望去，像一群疲...</p>
                <a title="路·过-喜欢在路上" href="/chapter?a=3" target="_blank" class="readmore">阅读全文>></a>
            </ul>
            <p class="dateview">
                <span>发布时间：2019-08-19</span>
                <span>作者：admin</span>
                <span>分类：[<a href="/">悠客</a>]</span>
                <span class="nl">浏览（101)</span>
                <span class="n2">评论（<a href="/">0</a>）</span>
                <div class="line"></div>
            </p>
        </div>
        
	</div>
</article>
<footer>
    <p class="ft-copyright">个人博客 Sunshine </p>
    <div id="tbox"> <a id="togbook" href=""></a> <a id="gotop" href="javascript:void(0)"></a></div>
</footer>
</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

<script>
    fetch('http://localhost:8083/add').then(req=>req.json()).then((data)=>{
        let oneblog = document.getElementsByClassName('oneblog');
        data.map((item,index)=>{
            oneblog[index].getElementsByTagName('h2')[0].getElementsByTagName('a')[0].innerHTML = item.chapterName;
            oneblog[index].getElementsByTagName('h2')[0].getElementsByTagName('a')[0].title = item.chapterName;
            oneblog[index].getElementsByTagName('figure')[0].getElementsByTagName('img')[0].src = item.imgPath;
            oneblog[index].getElementsByClassName('nlist')[0].getElementsByTagName('p')[0].innerHTML = item.chapterDes;
            oneblog[index].getElementsByClassName('nlist')[0].getElementsByTagName('a')[0].title = item.chapterName;
            // oneblog[index].getElementsByClassName('dateview')[0].getElementsByTagName('span')[0].innerHTML = '发布时间:'+item.publishTimer;
            oneblog[index].getElementsByClassName('dateview')[0].getElementsByTagName('span')[3].innerHTML = item.views;

        });
    });

    
    fetch('http://localhost:8083/add').then((req)=>{
        return req.json();
    }).then((data)=>{
        console.log(data.length);
        let length = document.getElementsByClassName('oneblog').length;
        console.log(length);
        let newblog = document.getElementsByClassName('newblog')[0];
        for(let i = data.length-(data.length-length);i<data.length;i++){
        //    console.log(i);
            addNode(newblog,i,data);
        }
    });
    function addNode(newblog,i,data){
        var article = data[i];
        var oneblog = document.createElement('div');
        var title = document.createElement('h2');
        var content = document.createElement('span');
        var a = document.createElement('a');
        a.href = `/chapter?a=${i}`;
        a.innerHTML = article.chapterName;
        title.appendChild(a);
        content.innerHTML = article.chapterContent;
        oneblog.appendChild(title);
        oneblog.appendChild(content);
        newblog.appendChild(oneblog);
    }
</script>
</html>